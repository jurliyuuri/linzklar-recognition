# linzklar-recognition

## What this is 
Linzklar (pronounced LINTS-claah), or Lanermic logogram, is a logographic writing system used mainly in [Faikleone](https://wikirlevip.miraheze.org/wiki/Faikleone), a [conworld](https://en.wikibooks.org/wiki/Conworld) the authors of this repository are building. 

![](DSC_1318-01.jpeg)

![](hsjoihs_.png)

![](DDf9lFVUwAAWe7c.jpg)

This repository currently contains the dataset of hand-written linzklar (written by the builders of the conworld through a [Web app](https://github.com/jurliyuuri/linzi-recognition)), with which we aim to implement a handwriting linzklar input system in the future.

## Data format

### /data

[/data](https://github.com/jurliyuuri/linzklar-recognition/tree/master/data) contains all the raw data, where each JSON file is either an array of `{ "character": (annotation), "data" : (array of array of {x: number, y: number}) }`, or `{ "character": (annotation), "data" : (array of array of {x: number, y: number}), initialDotCaptured: true}`. Each array of coordinates corresponds to a stroke; an array of strokes makes up a character. Due to an oversight, for the first 30,126 samples the initial dot of every single stroke is absent from the data, and such files are marked with the lack of `initialDotCaptured: true`.

Since Linzklar is (obviously) not in Unicode, and since the use of Private Use Area in a public place like a GitHub repository is to be frowned upon, each annotation is actually given in terms of a conventionally determined mapping to a Chinese character. Hence <img src="https://jurliyuuri.github.io/lin-marn/%E7%87%90%E5%AD%97%E7%94%BB%E5%83%8F/%E7%8E%8B.png" width="30" height="30" /> is annotated as `王`, <img src="https://jurliyuuri.github.io/lin-marn/%E7%87%90%E5%AD%97%E7%94%BB%E5%83%8F/%E5%86%A0.png" width="30" height="30" /> as `冠`, and so on.

To give an example,

```json
[
  {
    "character": "再",
    "data": [
      [
        { "x": 72, "y": 103 },
        { "x": 74, "y": 110 },
        { "x": 78, "y": 119 },
        { "x": 84, "y": 128 },
        { "x": 89, "y": 135 },
        { "x": 94, "y": 139 },
        { "x": 97, "y": 141 },
        { "x": 97, "y": 141 }
      ],
      [
        { "x": 159, "y": 89 },
        { "x": 159, "y": 94 },
        { "x": 159, "y": 106 },
        { "x": 158, "y": 115 },
        { "x": 152, "y": 136 },
        { "x": 145, "y": 155 },
        { "x": 134, "y": 172 },
        { "x": 120, "y": 188 },
        { "x": 108, "y": 198 },
        { "x": 99, "y": 204 },
        { "x": 95, "y": 206 },
        { "x": 95, "y": 206 }
      ]
    ]
   }, {
    "character": "無",
    "data": [
      [
        { "x": 95.12094116210938, "y": 92.58360290527344 },
        { "x": 109.80926513671875, "y": 102.65560913085938 },
        { "x": 114.42559814453125, "y": 107.27194213867188 },
        { "x": 119.88128662109375, "y": 113.14726257324219 },
        { "x": 127.43524169921875, "y": 122.79959106445312 },
        { "x": 127.43524169921875, "y": 122.79959106445312 }
      ]
    ],
    "initialDotCaptured": true
  }
]
```

stores two samples that corresponds to <img src="https://jurliyuuri.github.io/lin-marn/%E7%87%90%E5%AD%97%E7%94%BB%E5%83%8F/%E5%86%8D.png" width="30" height="30" /> (transcribed `再`) and <img src="https://jurliyuuri.github.io/lin-marn/%E7%87%90%E5%AD%97%E7%94%BB%E5%83%8F/%E7%84%A1.png" width="30" height="30" /> (transcribed `無`). We can see that <img src="https://jurliyuuri.github.io/lin-marn/%E7%87%90%E5%AD%97%E7%94%BB%E5%83%8F/%E5%86%8D.png" width="30" height="30" /> is made up of two strokes, and hence its `data` is an array of the two strokes comprising the character. 

### /data_images/svg

[/data_images/svg](https://github.com/jurliyuuri/linzklar-recognition/tree/master/data_images/svg) contains all the raw data converted into svg images. `initial_dot_captured` contains the >20,000 samples whose initial dot of every stroke is properly recorded. `initial_dot_omitted` is made up of >50,000 samples stripped off of their initial dots (unintentionally for the first 30,126; intentionally for the remaining data). `initial_dot_captured_or_augmented` is a folder containing all the images in `initial_dot_captured`, as well as the first 30,126 samples with each of the missing initial dot inferred (by a simple linear interpolation) from the remaining dots.

Inside each `/data_images/svg/initial_dot_*` are folders whose names are the annotations (given in terms of the Chinese characters), and each folder contains the svgs (supposedly) corresponding to the same character. As for the file name, `070cd99d-ce1d-4906-90b7-503c73421f97.json__268.svg` means that it is the 268th (0th index) sample in the file `070cd99d-ce1d-4906-90b7-503c73421f97.json`.

`/data_images/svg` is generated by converting from `/data` using `/converter`. Provided that you have [cargo installed](https://doc.rust-lang.org/stable/cargo/getting-started/installation.html), all you need to do is

```
$ cd converter
$ cargo run --release
```

### /data_images/png

[/data_images/png](https://github.com/jurliyuuri/linzklar-recognition/tree/master/data_images/png) is the same as `/data_images/svg`, except that it is converted to png with [mogrify](https://imagemagick.org/script/mogrify.php).

## Shuffle through the dataset
[Shuffle through the dataset](http://jurliyuuri.com/linzklar-recognition/random.html).

## Pairs that are expected to be difficult to distinguish
* <img src="http://jurliyuuri.github.io/lin-marn/%E7%87%90%E5%AD%97%E7%94%BB%E5%83%8F/%E8%8F%93.png" width="30" height="30"> `菓` and <img src="http://jurliyuuri.github.io/lin-marn/%E7%87%90%E5%AD%97%E7%94%BB%E5%83%8F/%E7%B5%82.png" width="30" height="30"> `終`
* <img src="http://jurliyuuri.github.io/lin-marn/%E7%87%90%E5%AD%97%E7%94%BB%E5%83%8F12/%E6%B0%8F.png" width="30" height="30"> `氏` and <img src="http://jurliyuuri.github.io/lin-marn/%E7%87%90%E5%AD%97%E7%94%BB%E5%83%8F/%E6%9E%9C.png" width="30" height="30"> `果`
* <img src="http://jurliyuuri.github.io/lin-marn/%E7%87%90%E5%AD%97%E7%94%BB%E5%83%8F/%E5%B7%A6.png" width="30" height="30"> `左` and <img src="http://jurliyuuri.github.io/lin-marn/%E7%87%90%E5%AD%97%E7%94%BB%E5%83%8F/%E8%80%8C.png" width="30" height="30"> `而`
* <img src="http://jurliyuuri.github.io/lin-marn/%E7%87%90%E5%AD%97%E7%94%BB%E5%83%8F/%E5%8F%97.png" width="30" height="30"> `受` and <img src="http://jurliyuuri.github.io/lin-marn/%E7%87%90%E5%AD%97%E7%94%BB%E5%83%8F/%E7%B5%B5.png" width="30" height="30"> `絵`

## これはなに
燐字データセットのデータ集
 
cf. [thanks.txt](https://github.com/jurliyuuri/linzi-recognition/blob/master/thanks.txt)
